apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: "68"
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"deployment.kubernetes.io/revision":"4"},"creationTimestamp":null,"generation":1,"labels":{"run":"cbioportal-backend-genie-public-beta"},"name":"cbioportal-backend-genie-public-beta","namespace":"default","selfLink":"/apis/extensions/v1beta1/namespaces/default/deployments/cbioportal-backend-genie-public-beta"},"spec":{"replicas":1,"selector":{"matchLabels":{"run":"cbioportal-backend-genie-public-beta"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"creationTimestamp":null,"labels":{"run":"cbioportal-backend-genie-public-beta"}},"spec":{"containers":[{"args":["-Xms1g","-Xmx25g","-XX:+UnlockExperimentalVMOptions","-XX:+UseShenandoahGC","-XX:ShenandoahUncommitDelay=1000","-XX:ShenandoahGuaranteedGCInterval=10000","-XX:+PrintFlagsFinal","-XshowSettings:vm","-Dcom.sun.management.jmxremote.rmi.port=8849","-Dcom.sun.management.jmxremote=false","-Dcom.sun.management.jmxremote.port=8849","-Dcom.sun.management.jmxremote.ssl=false","-Dcom.sun.management.jmxremote.authenticate=false","-Dcom.sun.management.jmxremote.local.only=false","-Djava.rmi.server.hostname=localhost","-Dfrontend.url=https://deploy-preview-4654--cbioportalfrontend.netlify.app/","-Ddefault_cross_cancer_study_session_id=5c8a7d55e4b046111fee2296","-Dquick_search.enabled=false","-Dskin.footer= | \u003ca href=\"https://www.aacr.org/professionals/research/aacr-project-genie\"\u003eAACR Project GENIE\u003c/a\u003e","-Dskin.right_nav.whats_new_blurb=","-Dskin.title=cBioPortal for GENIE","-Dskin.email_contact=info at aacrgenie dot org","-Dskin.tag_line_image=institutes/GENIE.png","-Dskin.right_logo=institutes/AACR.png","-Dskin.blurb=This portal contains genomic alteration data and clinical annotation from the \u003ca href=\"https://www.aacr.org/professionals/research/aacr-project-genie\"\u003eAACR Project GENIE\u003c/a\u003e. While the data is publicly available, all users must adhere to the \u003ca target=\"_blank\" href=\"https://www.synapse.org/#!Synapse:syn21683345\"\u003eTerms of Use\u003c/a\u003e.\u003cp\u003e\u003cb\u003ePlease cite\u003c/b\u003e The AACR Project GENIE Consortium. AACR Project GENIE: Powering Precision Medicine Through An International Consortium, Cancer Discovery 2017.\u003cbr/\u003e\u003cbr/\u003eThe full data set is available for download from \u003ca href=\"http://synapse.org/genie\"\u003eSynapse\u003c/a\u003e.","-Dskin.examples_right_column_html=\u003cul\u003e\u003cli\u003e\u003ca href=\"results?cancer_study_list=genie_public\u0026tab_index=tab_visualize\u0026case_set_id=genie_public_all\u0026Action=Submit\u0026gene_list=KRAS%250ANRAS%250AHRAS%250ABRAF\"\u003eRAS/RAF mutations across the GENIE cohort\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"results?cancer_study_list=genie_public\u0026genetic_profile_ids_PROFILE_MUTATION_EXTENDED=genie_public_mutations\u0026data_priority=0\u0026case_set_id=genie_public_all\u0026case_ids=\u0026patient_case_select=sample\u0026gene_set_choice=user-defined-list\u0026gene_list=ERBB2\u0026clinical_param_selection=null\u0026tab_index=tab_visualize\u0026Action=Submit#mutations_details\"\u003eERBB2 mutations\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"results?cancer_study_list=genie_public\u0026genetic_profile_ids_PROFILE_MUTATION_EXTENDED=genie_public_mutations\u0026genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION=genie_public_cna\u0026data_priority=0\u0026case_set_id=genie_public_cnaseq\u0026case_ids=\u0026patient_case_select=sample\u0026gene_set_choice=user-defined-list\u0026gene_list=BRAF%3A+MUT+%3D+V600\u0026clinical_param_selection=null\u0026tab_index=tab_visualize\u0026Action=Submit\u0026show_samples=false#pancancer_study_summary\"\u003eBRAF V600 mutations across cancer types\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"patient?studyId=genie_public\u0026caseId=GENIE-MSK-P-0001296\"\u003eLung cancer case with post-treatment T790M EGFR mutation\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e","-Dskin.authorization_message=Welcome to the AACR Project GENIE cBioPortal.\u003cbr/\u003e\u003cbr/\u003eIf you are a new user, you will need to register and agree to the terms of use before you can use this portal. [\u003ca href=\"https://docs.google.com/forms/d/e/1FAIpQLScwlJ9WRmAGZ08CCg8wYo8l8bcUmsAzJ09i1MKjBNtb_dLqIw/viewform\"\u003eFirst time user registration\u003c/a\u003e].","-Dapp.name=genie-public-portal","-Ddbconnector=dbcp","-Dauthenticate=false","-Dauthorization=false","-Ddb.user=$(DB_USER)","-Ddb.password=$(DB_PASSWORD)","-Ddb.host=$(DB_HOST)","-Ddb.portal_db_name=$(DB_PORTAL_DB_NAME)","-Dtomcat.catalina.scope=runtime","-Ddb.connection_string=$(DB_CONNECTION_STRING)","-Denable_cross_study_expression=(studies)=\u003estudies.filter(s=\u003e/pan_can_atlas/.test(s.studyId) === false).length === 0","-Ddb.clickhouse.connection_string=jdbc:ch:https://kjog14rte9.us-east-1.aws.clickhouse.cloud/cbioportal?zeroDateTimeBehavior=convertToNull","-Ddb.clickhouse.user=default","-Ddb.clickhouse.password=6f_jMKh_gmhJt","-Dshow.transcript_dropdown=true","-Dskin.show_tweet_button=$(SKIN_SHOW_TWEET_BUTTON)","-Dskin.email_contact=cbioportal@googlegroups.com","-Dskin.right_nav.show_data_sets=false","-Dskin.right_nav.show_testimonials=false","-Dskin.login.contact_html=Please follow the \"First time user registration\" link below to request access. If you think you have received this message in error, please contact us at \u003ca style=\"color:#FF0000\" href=\"mailto:info@aacrgenie.org\"\u003einfo@aacrgenie.org\u003c/a\u003e. You will receive an email confirmation with login information within 15 minutes of registering.","-Dskin.data_sets_footer=","-Dskin.data_sets_header=The portal currently contains data from \u003cNUM_CANCER_STUDIES\u003e cancer genomics studies.  The table below lists the number of available samples per cancer study and data type.","-Dskin.documentation.baseurl=https://raw.githubusercontent.com/cBioPortal/cbioportal/genie-documentation/docs/","-Dskin.documentation.news=https://docs.cbioportal.org/news-genie/","-Dskin.query.max_tree_depth=0","-Dsession.service.url=https://session-service.cbioportal.org/api/sessions/genie_public_beta_portal/","-Dsession.service.origin=*","-Dsession.service.user=$(SESSION_SERVICE_USER_NAME)","-Dsession.service.password=$(SESSION_SERVICE_USER_PASSWORD)","-Dgoogle_analytics_profile_id=$(GOOGLE_ANALYTICS_PROFILE_ID)","-Dsurvival.show_p_q_values_in_survival_type_table=false","-Dsurvival.min_group_threshold=6","-Dsurvival.initial_x_axis_limit=120","-Dgoogleplus.consumer.key=$(GOOGLE_PLUS_CONSUMER_KEY)","-Dgoogleplus.consumer.secret=$(GOOGLE_PLUS_CONSUMER_SECRET)","-Dbitly.url=$(BITLY_URL)","-Dbitly.access.token=$(BITLY_ACCESS_TOKEN)","-Dsentry.dsn=$(SENTRY_DSN)","-Dsentry.factory=org.cbioportal.logging.SentryClientFactory","-Ddb.suppress_schema_version_mismatch_errors=true","-Dsitemaps=false","-Doncokb.public_api.url=https://www.oncokb.org/api/v1","-Doncokb.token=$(ONCOKB_TOKEN)","-Dgenomenexus.url=https://www.genomenexus.org","-Dgenomenexus.isoform_override_source=uniprot","-Dshow.genomenexus.annotation_sources=mutation_assessor","-Ddat.unauth_users=anonymousUser","-Ddat.method=uuid","-Ddat.uuid.max_number_per_user=1","-Ddat.ttl_seconds=2592000","-Ddat.uuid.revoke_other_tokens=true","-Dcache.statistics_endpoint_enabled=false","-Dpersistence.cache_type=redis","-Dredis.leader_address=redis://cbioportal-genie-persistence-redis-master:6379","-Dredis.follower_address=redis://cbioportal-genie-persistence-redis-replicas:6379","-Dredis.database=6","-Dredis.password=$(REDIS_PERSISTENCE_PASSWORD)","-Dredis.clear_on_startup=true","-Denable_request_body_gzip_compression=true","-Dcomparison.categorical_na_values=Unknown|NA|Not documented in medical record|Test ordered, results not in chart|Test not done","-jar","/webapp-runner.jar","--proxy-base-url","https://genie-public-beta.cbioportal.org","--max-threads","0","--session-store","redis","--session-store-operation-timeout","10000","-AmaxHttpHeaderSize=16384","-AconnectionTimeout=20000","--enable-compression","--port","8888","/app.war"],"command":["java"],"envFrom":[{"configMapRef":{"name":"cbioportal-genie-public-beta"}}],"image":"cbioportal/cbioportal:demo-clickhouse-k8s-web-shenandoah","imagePullPolicy":"Always","livenessProbe":{"failureThreshold":5,"httpGet":{"path":"/login.jsp","port":8888},"initialDelaySeconds":180,"periodSeconds":12,"timeoutSeconds":1},"name":"cbioportal-backend-genie-public-beta","ports":[{"containerPort":8888,"protocol":"TCP"},{"containerPort":8849,"protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/api/health","port":8888},"initialDelaySeconds":45,"periodSeconds":5,"timeoutSeconds":1},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"}],"dnsPolicy":"ClusterFirst","nodeSelector":{"eks.amazonaws.com/nodegroup":"eks-genie-cbioportal"},"restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"terminationGracePeriodSeconds":30,"tolerations":[{"effect":"NoSchedule","key":"dedicated","operator":"Equal","value":"eks-genie-cbioportal"}]}}},"status":{}}
  creationTimestamp: "2024-01-05T15:25:33Z"
  generation: 75
  labels:
    run: cbioportal-backend-genie-public-beta
  name: cbioportal-backend-genie-public-beta
  namespace: default
  resourceVersion: "78899680"
  uid: 57f724c2-a5c9-41bd-86c3-505d48d0909c
spec:
  progressDeadlineSeconds: 600
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      run: cbioportal-backend-genie-public-beta
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/restartedAt: "2024-02-16T15:21:53-05:00"
      creationTimestamp: null
      labels:
        run: cbioportal-backend-genie-public-beta
    spec:
      containers:
        - args:
            - -Xms1g
            - -Xmx25g
            - -XX:+UnlockExperimentalVMOptions
            - -XX:+UseShenandoahGC
            - -XX:ShenandoahUncommitDelay=1000
            - -XX:ShenandoahGuaranteedGCInterval=10000
            - -XX:+PrintFlagsFinal
            - -XshowSettings:vm
            - -Dcom.sun.management.jmxremote.rmi.port=8849
            - -Dcom.sun.management.jmxremote=false
            - -Dcom.sun.management.jmxremote.port=8849
            - -Dcom.sun.management.jmxremote.ssl=false
            - -Dcom.sun.management.jmxremote.authenticate=false
            - -Dcom.sun.management.jmxremote.local.only=false
            - -Djava.rmi.server.hostname=localhost
            - -Dfrontend.url=https://deploy-preview-4654--cbioportalfrontend.netlify.app/
            - -Ddefault_cross_cancer_study_session_id=5c8a7d55e4b046111fee2296
            - -Dquick_search.enabled=false
            - -Dskin.footer= | <a href="https://www.aacr.org/professionals/research/aacr-project-genie">AACR
              Project GENIE</a>
            - -Dskin.right_nav.whats_new_blurb=
            - -Dskin.title=cBioPortal for GENIE
            - -Dskin.email_contact=info at aacrgenie dot org
            - -Dskin.tag_line_image=institutes/GENIE.png
            - -Dskin.right_logo=institutes/AACR.png
            - '-Dskin.blurb=This portal contains genomic alteration data and clinical
          annotation from the <a href="https://www.aacr.org/professionals/research/aacr-project-genie">AACR
          Project GENIE</a>. While the data is publicly available, all users must
          adhere to the <a target="_blank" href="https://www.synapse.org/#!Synapse:syn21683345">Terms
          of Use</a>.<p><b>Please cite</b> The AACR Project GENIE Consortium. AACR
          Project GENIE: Powering Precision Medicine Through An International Consortium,
          Cancer Discovery 2017.<br/><br/>The full data set is available for download
          from <a href="http://synapse.org/genie">Synapse</a>.'
            - -Dskin.examples_right_column_html=<ul><li><a href="results?cancer_study_list=genie_public&tab_index=tab_visualize&case_set_id=genie_public_all&Action=Submit&gene_list=KRAS%250ANRAS%250AHRAS%250ABRAF">RAS/RAF
              mutations across the GENIE cohort</a></li><li><a href="results?cancer_study_list=genie_public&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=genie_public_mutations&data_priority=0&case_set_id=genie_public_all&case_ids=&patient_case_select=sample&gene_set_choice=user-defined-list&gene_list=ERBB2&clinical_param_selection=null&tab_index=tab_visualize&Action=Submit#mutations_details">ERBB2
              mutations</a></li><li><a href="results?cancer_study_list=genie_public&genetic_profile_ids_PROFILE_MUTATION_EXTENDED=genie_public_mutations&genetic_profile_ids_PROFILE_COPY_NUMBER_ALTERATION=genie_public_cna&data_priority=0&case_set_id=genie_public_cnaseq&case_ids=&patient_case_select=sample&gene_set_choice=user-defined-list&gene_list=BRAF%3A+MUT+%3D+V600&clinical_param_selection=null&tab_index=tab_visualize&Action=Submit&show_samples=false#pancancer_study_summary">BRAF
              V600 mutations across cancer types</a></li><li><a href="patient?studyId=genie_public&caseId=GENIE-MSK-P-0001296">Lung
              cancer case with post-treatment T790M EGFR mutation</a></li></ul>
            - -Dskin.authorization_message=Welcome to the AACR Project GENIE cBioPortal.<br/><br/>If
              you are a new user, you will need to register and agree to the terms of
              use before you can use this portal. [<a href="https://docs.google.com/forms/d/e/1FAIpQLScwlJ9WRmAGZ08CCg8wYo8l8bcUmsAzJ09i1MKjBNtb_dLqIw/viewform">First
              time user registration</a>].
            - -Dapp.name=genie-public-portal
            - -Ddbconnector=dbcp
            - -Dauthenticate=false
            - -Dauthorization=false
            - -Ddb.user=$(DB_USER)
            - -Ddb.password=$(DB_PASSWORD)
            - -Ddb.host=$(DB_HOST)
            - -Ddb.portal_db_name=$(DB_PORTAL_DB_NAME)
            - -Dtomcat.catalina.scope=runtime
            - -Ddb.connection_string=$(DB_CONNECTION_STRING)
            - -Denable_cross_study_expression=(studies)=>studies.filter(s=>/pan_can_atlas/.test(s.studyId)
              === false).length === 0
            - -Ddb.clickhouse.connection_string=jdbc:ch:https://kjog14rte9.us-east-1.aws.clickhouse.cloud/cbioportal?zeroDateTimeBehavior=convertToNull
            - -Ddb.clickhouse.user=default
            - -Ddb.clickhouse.password=6f_jMKh_gmhJt
            - -Dshow.transcript_dropdown=true
            - -Dskin.show_tweet_button=$(SKIN_SHOW_TWEET_BUTTON)
            - -Dskin.email_contact=cbioportal@googlegroups.com
            - -Dskin.right_nav.show_data_sets=false
            - -Dskin.right_nav.show_testimonials=false
            - -Dskin.login.contact_html=Please follow the "First time user registration"
              link below to request access. If you think you have received this message
              in error, please contact us at <a style="color:#FF0000" href="mailto:info@aacrgenie.org">info@aacrgenie.org</a>.
              You will receive an email confirmation with login information within 15
              minutes of registering.
            - -Dskin.data_sets_footer=
            - -Dskin.data_sets_header=The portal currently contains data from <NUM_CANCER_STUDIES>
              cancer genomics studies.  The table below lists the number of available
              samples per cancer study and data type.
            - -Dskin.documentation.baseurl=https://raw.githubusercontent.com/cBioPortal/cbioportal/genie-documentation/docs/
            - -Dskin.documentation.news=https://docs.cbioportal.org/news-genie/
            - -Dskin.query.max_tree_depth=0
            - -Dsession.service.url=https://session-service.cbioportal.org/api/sessions/genie_public_beta_portal/
            - -Dsession.service.origin=*
            - -Dsession.service.user=$(SESSION_SERVICE_USER_NAME)
            - -Dsession.service.password=$(SESSION_SERVICE_USER_PASSWORD)
            - -Dgoogle_analytics_profile_id=$(GOOGLE_ANALYTICS_PROFILE_ID)
            - -Dsurvival.show_p_q_values_in_survival_type_table=false
            - -Dsurvival.min_group_threshold=6
            - -Dsurvival.initial_x_axis_limit=120
            - -Dgoogleplus.consumer.key=$(GOOGLE_PLUS_CONSUMER_KEY)
            - -Dgoogleplus.consumer.secret=$(GOOGLE_PLUS_CONSUMER_SECRET)
            - -Dbitly.url=$(BITLY_URL)
            - -Dbitly.access.token=$(BITLY_ACCESS_TOKEN)
            - -Dsentry.dsn=$(SENTRY_DSN)
            - -Dsentry.factory=org.cbioportal.logging.SentryClientFactory
            - -Ddb.suppress_schema_version_mismatch_errors=true
            - -Dsitemaps=false
            - -Doncokb.public_api.url=https://www.oncokb.org/api/v1
            - -Doncokb.token=$(ONCOKB_TOKEN)
            - -Dgenomenexus.url=https://www.genomenexus.org
            - -Dgenomenexus.isoform_override_source=uniprot
            - -Dshow.genomenexus.annotation_sources=mutation_assessor
            - -Ddat.unauth_users=anonymousUser
            - -Ddat.method=uuid
            - -Ddat.uuid.max_number_per_user=1
            - -Ddat.ttl_seconds=2592000
            - -Ddat.uuid.revoke_other_tokens=true
            - -Dcache.statistics_endpoint_enabled=false
            - -Dpersistence.cache_type=redis
            - -Dredis.leader_address=redis://cbioportal-genie-persistence-redis-master:6379
            - -Dredis.follower_address=redis://cbioportal-genie-persistence-redis-replicas:6379
            - -Dredis.database=6
            - -Dredis.password=$(REDIS_PERSISTENCE_PASSWORD)
            - -Dredis.clear_on_startup=true
            - -Denable_request_body_gzip_compression=true
            - -Dcomparison.categorical_na_values=Unknown|NA|Not documented in medical
              record|Test ordered, results not in chart|Test not done
            - -jar
            - /webapp-runner.jar
            - --proxy-base-url
            - https://genie-public-beta.cbioportal.org
            - --max-threads
            - "0"
            - --session-store
            - redis
            - --session-store-operation-timeout
            - "10000"
            - -AmaxHttpHeaderSize=16384
            - -AconnectionTimeout=20000
            - --enable-compression
            - --port
            - "8888"
            - /app.war
          command:
            - java
          env:
            - name: LAST_RESTART
              value: Tue Feb 20 08:56:17 EST 2024
          envFrom:
            - configMapRef:
                name: cbioportal-genie-public-beta
          image: cbioportal/cbioportal:demo-rfc80-poc-web-shenandoah
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 5
            httpGet:
              path: /login.jsp
              port: 8888
              scheme: HTTP
            initialDelaySeconds: 180
            periodSeconds: 12
            successThreshold: 1
            timeoutSeconds: 1
          name: cbioportal-backend-genie-public-beta
          ports:
            - containerPort: 8888
              protocol: TCP
            - containerPort: 8849
              protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /api/health
              port: 8888
              scheme: HTTP
            initialDelaySeconds: 45
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      nodeSelector:
        eks.amazonaws.com/nodegroup: eks-genie-cbioportal
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      tolerations:
        - effect: NoSchedule
          key: dedicated
          operator: Equal
          value: eks-genie-cbioportal
status:
  availableReplicas: 1
  conditions:
    - lastTransitionTime: "2024-01-05T15:25:33Z"
      lastUpdateTime: "2024-01-05T15:25:33Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2024-03-11T21:36:31Z"
      lastUpdateTime: "2024-03-13T02:13:59Z"
      message: ReplicaSet "cbioportal-backend-genie-public-beta-6c5d56f898" has successfully
        progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
  observedGeneration: 74
  readyReplicas: 1
  replicas: 1
  updatedReplicas: 1
